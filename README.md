# é€šä¹‰åƒé—®è§†é¢‘ç”Ÿæˆå·¥å…·é›†

åŸºäºé˜¿é‡Œäº‘é€šä¹‰åƒé—®APIçš„AIè§†é¢‘ç”Ÿæˆå·¥å…·é›†ï¼Œæ”¯æŒæ–‡ç”Ÿå›¾ã€å›¾ç”Ÿè§†é¢‘ã€æ–‡ç”Ÿè§†é¢‘ã€é¦–å°¾å¸§è§†é¢‘ã€å›¾ç‰‡ç¼–è¾‘ç­‰å¤šç§ç”Ÿæˆæ¨¡å¼ã€‚

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. è®¾ç½®APIå¯†é’¥ï¼ˆå¯é€‰ï¼‰

```bash
export DASHSCOPE_API_KEY="sk-c4af8d8ed01d43a587eda9b8c3b32058"
```

æ³¨ï¼šä»£ç ä¸­å·²é…ç½®é»˜è®¤APIå¯†é’¥ï¼Œå¯ç›´æ¥ä½¿ç”¨

### 3. å¯åŠ¨WebæœåŠ¡

```bash
python app.py
```

æœåŠ¡å°†åœ¨ **http://localhost:30001** å¯åŠ¨

## ğŸ“ é¡¹ç›®ç»“æ„

```
video_tool_mix/
â”œâ”€â”€ app.py                    # Flask WebæœåŠ¡ä¸»æ–‡ä»¶
â”œâ”€â”€ requirements.txt          # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ templates/               # HTMLæ¨¡æ¿
â”‚   â””â”€â”€ index.html          # Webç•Œé¢
â”œâ”€â”€ static/                 # é™æ€èµ„æº
â”œâ”€â”€ assets/                 # ç´ ææ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ images/            # å›¾ç‰‡ç´ æ
â”‚   â””â”€â”€ videos/            # è§†é¢‘ç´ æ
â”œâ”€â”€ output/                 # è¾“å‡ºæ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ keyframe_plus/     # é¦–å°¾å¸§è§†é¢‘è¾“å‡º
â”‚   â””â”€â”€ image_edit/       # å›¾ç‰‡ç¼–è¾‘è¾“å‡º
â”œâ”€â”€ uploads/               # ä¸Šä¼ æ–‡ä»¶å¤¹
â””â”€â”€ test_output/           # æµ‹è¯•è¾“å‡º
```

## ğŸ¯ åŠŸèƒ½æ¨¡å—

### 1. æ–‡ç”Ÿå›¾ (Text to Image)
- **æ–‡ä»¶:** `qwen_t2i_flash.py`
- **APIç«¯ç‚¹:** `/api/text-to-image`
- **æ¨¡å‹:** wanx-v1
- **ç”Ÿæˆæ—¶é—´:** 10-30ç§’

### 2. å›¾ç”Ÿè§†é¢‘ (Image to Video)
- **æ–‡ä»¶:** `qwen_i2v_flash.py`
- **APIç«¯ç‚¹:** `/api/image-to-video`
- **æ¨¡å‹:** wanx-i2v-flash
- **ç”Ÿæˆæ—¶é—´:** 3-5åˆ†é’Ÿ

### 3. æ–‡ç”Ÿè§†é¢‘ (Text to Video)
- **æ–‡ä»¶:** `qwen_t2v_plus.py`
- **APIç«¯ç‚¹:** `/api/text-to-video`
- **æ¨¡å‹:** wanx2.0-t2v-plus
- **ç”Ÿæˆæ—¶é—´:** 3-5åˆ†é’Ÿ

### 4. é¦–å°¾å¸§è§†é¢‘ (Keyframe to Video)
- **æ–‡ä»¶:** `qwen_keyframe_plus.py`
- **APIç«¯ç‚¹:** `/api/keyframe-to-video`
- **æ¨¡å‹:** wanx2.1-kf2v-plus
- **ç”Ÿæˆæ—¶é—´:** 7-10åˆ†é’Ÿ
- **ç‰¹ç‚¹:** æ”¯æŒå®Œæ•´æµç¨‹ï¼ˆæäº¤â†’è½®è¯¢â†’ä¸‹è½½ï¼‰

### 5. å›¾ç‰‡ç¼–è¾‘ (Image Edit) â­æ–°åŠŸèƒ½
- **æ–‡ä»¶:** `qwen_image_edit.py`
- **APIç«¯ç‚¹:** `/api/image-edit`
- **æ¨¡å‹:** qwen-image-edit
- **ç”Ÿæˆæ—¶é—´:** 1-2åˆ†é’Ÿ
- **ç‰¹ç‚¹:** åŸºäºæ–‡æœ¬æŒ‡ä»¤ç¼–è¾‘å›¾ç‰‡ï¼Œæ”¯æŒé£æ ¼è½¬æ¢ã€ç»†èŠ‚ä¿®æ”¹ç­‰

## ğŸ”§ ç‹¬ç«‹æµ‹è¯•å„æ¨¡å—

### æµ‹è¯•é¦–å°¾å¸§è§†é¢‘ç”Ÿæˆ
```bash
python qwen_keyframe_plus.py
```

### æµ‹è¯•æ–‡ç”Ÿå›¾
```bash
python qwen_t2i_flash.py
```

### æµ‹è¯•å›¾ç”Ÿè§†é¢‘
```bash
python qwen_i2v_flash.py
```

### æµ‹è¯•æ–‡ç”Ÿè§†é¢‘
```bash
python qwen_t2v_plus.py
```

### æµ‹è¯•å›¾ç‰‡ç¼–è¾‘
```bash
python qwen_image_edit.py
```

## ğŸ“ APIè°ƒç”¨ç¤ºä¾‹

### é¦–å°¾å¸§è§†é¢‘ç”Ÿæˆï¼ˆæ–°åŠŸèƒ½ï¼‰
```python
import requests

url = "http://localhost:30001/api/keyframe-to-video"
data = {
    "first_frame_path": "assets/images/first.png",
    "last_frame_path": "assets/images/last.png",
    "prompt": "æµç•…çš„è¿‡æ¸¡åŠ¨ç”»",
    "resolution": "720P",
    "prompt_extend": True
}

response = requests.post(url, json=data)
result = response.json()
```

### æ–‡ç”Ÿå›¾
```python
url = "http://localhost:30001/api/text-to-image"
data = {
    "prompt": "ä¸€åªå¯çˆ±çš„å°çŒ«",
    "negative_prompt": "æ¨¡ç³Š",
    "size": "1024*1024",
    "style": "auto",
    "n": 1
}
```

### å›¾ç”Ÿè§†é¢‘
```python
url = "http://localhost:30001/api/image-to-video"
data = {
    "image_path": "assets/images/cat.png",
    "prompt": "è®©ç”»é¢åŠ¨èµ·æ¥",
    "duration": 5,
    "fps": 30,
    "resolution": "1280*720"
}
```

### æ–‡ç”Ÿè§†é¢‘
```python
url = "http://localhost:30001/api/text-to-video"
data = {
    "prompt": "ä¸€åªçŒ«åœ¨èŠ±å›­é‡Œå¥”è·‘",
    "duration": 5,
    "style": "realistic",
    "motion_strength": 0.7,
    "resolution": "1280*720"
}
```

### å›¾ç‰‡ç¼–è¾‘
```python
url = "http://localhost:30001/api/image-edit"
data = {
    "image_path": "assets/images/cat.png",
    "edit_instruction": "ç»™å°çŒ«æˆ´ä¸€ä¸ªçº¢è‰²åœ£è¯å¸½",
    "negative_prompt": "æ¨¡ç³Šï¼Œä½è´¨é‡",
    "watermark": False
}
```

## âš™ï¸ é…ç½®è¯´æ˜

### APIå¯†é’¥é…ç½®
- ç¯å¢ƒå˜é‡: `DASHSCOPE_API_KEY`
- é»˜è®¤å€¼: `sk-c4af8d8ed01d43a587eda9b8c3b32058`ï¼ˆå·²é…ç½®ï¼‰

### ç«¯å£é…ç½®
- é»˜è®¤ç«¯å£: **30001**
- ä¿®æ”¹ä½ç½®: `app.py` ç¬¬414è¡Œ

### è¾“å‡ºç›®å½•
- å›¾ç‰‡: `output/`
- è§†é¢‘: `output/keyframe_plus/`
- å›¾ç‰‡ç¼–è¾‘: `output/image_edit/`
- ç´ æ: `assets/`

## ğŸ§ª æµ‹è¯•å·¥å…·

- `test.py` - é¦–å°¾å¸§è§†é¢‘å®Œæ•´æµ‹è¯•
- `quick_test.py` - å¿«é€ŸAPIè¿é€šæ€§æµ‹è¯•
- `check_task.py` - ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢å·¥å…·
- `test_keyframe_integration.py` - é›†æˆæµ‹è¯•

## ğŸ“Š ä»»åŠ¡å¤„ç†æµç¨‹

1. **æäº¤ä»»åŠ¡** - å°†è¯·æ±‚å‘é€åˆ°API
2. **è·å–ä»»åŠ¡ID** - APIè¿”å›ä»»åŠ¡æ ‡è¯†
3. **è½®è¯¢çŠ¶æ€** - æ¯30ç§’æŸ¥è¯¢ä¸€æ¬¡
4. **ä¸‹è½½ç»“æœ** - ä»»åŠ¡å®Œæˆåä¸‹è½½è§†é¢‘
5. **ä¿å­˜åˆ°æœ¬åœ°** - è‡ªåŠ¨ä¿å­˜åˆ°outputç›®å½•

## â±ï¸ ç”Ÿæˆæ—¶é—´å‚è€ƒ

| åŠŸèƒ½ | æ—¶é—´ | åˆ†è¾¨ç‡ |
|------|------|--------|
| æ–‡ç”Ÿå›¾ | 10-30ç§’ | 1024Ã—1024 |
| å›¾ç”Ÿè§†é¢‘ | 3-5åˆ†é’Ÿ | 1280Ã—720 |
| æ–‡ç”Ÿè§†é¢‘ | 3-5åˆ†é’Ÿ | 1280Ã—720 |
| é¦–å°¾å¸§è§†é¢‘ | 7-10åˆ†é’Ÿ | 720P/1080P |
| å›¾ç‰‡ç¼–è¾‘ | 1-2åˆ†é’Ÿ | 1024Ã—1024 |

## ğŸ” å¸¸è§é—®é¢˜

### 1. APIè¿æ¥è¶…æ—¶
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç¡®è®¤APIå¯†é’¥æœ‰æ•ˆ
- å¯èƒ½éœ€è¦ä»£ç†è®¾ç½®

### 2. è§†é¢‘ç”Ÿæˆå¤±è´¥
- æ£€æŸ¥å›¾ç‰‡æ ¼å¼ï¼ˆæ”¯æŒPNG/JPGï¼‰
- ç¡®ä¿å›¾ç‰‡æ–‡ä»¶å­˜åœ¨
- åˆ†è¾¨ç‡ä½¿ç”¨720Pæˆ–1080P

### 3. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i:30001

# ä¿®æ”¹ç«¯å£
# ç¼–è¾‘ app.py ç¬¬414è¡Œ
```

### 4. ä¾èµ–å®‰è£…å¤±è´¥
```bash
# ä½¿ç”¨å›½å†…é•œåƒ
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

## ğŸ’¡ ä½¿ç”¨æç¤º

1. **é¦–å°¾å¸§è§†é¢‘ç”Ÿæˆ**
   - é€‰æ‹©ä¸¤å¼ å…³è”å›¾ç‰‡ä½œä¸ºé¦–å°¾å¸§
   - æç¤ºè¯æè¿°è¿‡æ¸¡åŠ¨ç”»æ•ˆæœ
   - å»ºè®®ä½¿ç”¨720Påˆ†è¾¨ç‡
   - å¯ç”¨æç¤ºè¯æ‰©å±•è·å¾—æ›´å¥½æ•ˆæœ

2. **æ–‡ç”Ÿå›¾ä¼˜åŒ–**
   - è¯¦ç»†æè¿°åœºæ™¯å’Œé£æ ¼
   - ä½¿ç”¨è´Ÿå‘æç¤ºè¯æ’é™¤ä¸æƒ³è¦çš„å…ƒç´ 
   - å¯è®¾ç½®seedå€¼è·å¾—å¯é‡å¤ç»“æœ

3. **è§†é¢‘ç”Ÿæˆå»ºè®®**
   - å›¾ç‰‡è´¨é‡å½±å“è§†é¢‘æ•ˆæœ
   - åŠ¨ä½œå¹…åº¦é€šè¿‡motion_strengthæ§åˆ¶
   - å¤æ‚åœºæ™¯å¯èƒ½éœ€è¦æ›´é•¿ç”Ÿæˆæ—¶é—´

4. **å›¾ç‰‡ç¼–è¾‘æŠ€å·§**
   - ä½¿ç”¨æ¸…æ™°çš„ç¼–è¾‘æŒ‡ä»¤æè¿°æƒ³è¦çš„æ•ˆæœ
   - è´Ÿå‘æç¤ºè¯å¸®åŠ©æ’é™¤ä¸æƒ³è¦çš„ç»“æœ
   - æ”¯æŒé¢œè‰²è°ƒæ•´ã€é£æ ¼è½¬æ¢ã€æ·»åŠ ç‰©ä½“ç­‰
   - ç¼–è¾‘ç»“æœä¼šè‡ªåŠ¨ä¿å­˜åˆ°ç´ æåº“

## ğŸ“ æ”¯æŒ

- APIæ–‡æ¡£: https://help.aliyun.com/zh/dashscope/
- ç™¾ç‚¼å¹³å°: https://bailian.console.aliyun.com/
- é—®é¢˜åé¦ˆ: æäº¤Issueåˆ°é¡¹ç›®ä»“åº“

## ğŸ“„ è®¸å¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚